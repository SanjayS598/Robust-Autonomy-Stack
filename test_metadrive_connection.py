# Test script to verify MetaDrive installation and basic functionality\n# Run this to check if MetaDrive is properly installed\n\nimport sys\n\ntry:\n    from metadrive import MetaDriveEnv\n    from metadrive.constants import HELP_MESSAGE\n    print(\"SUCCESS: MetaDrive imported successfully\")\n    print(f\"MetaDrive version: {MetaDriveEnv.VERSION if hasattr(MetaDriveEnv, 'VERSION') else 'unknown'}\")\nexcept ImportError as e:\n    print(f\"ERROR: Failed to import MetaDrive: {e}\")\n    print(\"\\nInstall MetaDrive with: pip install metadrive-simulator\")\n    sys.exit(1)\n\ndef test_metadrive():\n    print(\"\\nCreating MetaDrive environment...\")\n    \n    try:\n        # Create a simple environment\n        config = {\n            \"use_render\": False,  # No rendering for this test\n            \"manual_control\": False,\n            \"traffic_density\": 0.1,\n            \"map\": \"X\",  # Simple intersection map\n            \"start_seed\": 0,\n        }\n        \n        env = MetaDriveEnv(config)\n        print(\"SUCCESS: MetaDrive environment created\")\n        \n        # Reset environment\n        obs, info = env.reset()\n        print(f\"Observation shape: {obs.shape if hasattr(obs, 'shape') else type(obs)}\")\n        print(f\"Info keys: {list(info.keys()) if isinstance(info, dict) else 'N/A'}\")\n        \n        # Take a few random steps\n        print(\"\\nTaking 5 random steps...\")\n        for i in range(5):\n            action = env.action_space.sample()\n            obs, reward, terminated, truncated, info = env.step(action)\n            print(f\"Step {i+1}: reward={reward:.3f}, terminated={terminated}, truncated={truncated}\")\n            \n            if terminated or truncated:\n                print(\"Episode ended early\")\n                break\n        \n        env.close()\n        print(\"\\nSUCCESS: MetaDrive is working correctly!\")\n        print(\"\\nYou can now proceed with Phase 1.2: Implementing the MetaDrive adapter\")\n        return True\n        \n    except Exception as e:\n        print(f\"ERROR: Failed to run MetaDrive: {e}\")\n        import traceback\n        traceback.print_exc()\n        return False\n\nif __name__ == \"__main__\":\n    success = test_metadrive()\n    sys.exit(0 if success else 1)
